(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{Tjht:function(t,e,r){"use strict";r.r(e),r.d(e,"CheckoutModule",(function(){return j}));var o=r("tyNb"),i=r("3Pt+"),c=r("jtHE"),a=r("1G5W"),n=r("OaWH"),s=r("Tj/N"),l=r("fXoL"),u=r("lGQG"),b=r("c14U"),m=r("tLlE"),d=r("DJIC"),p=r("ofXK"),h=r("kmnG"),f=r("qFsG"),g=r("bTqV"),y=r("Wp6s"),C=r("YK+t");function T(t,e){1&t&&(l.Ub(0,"span"),l.Cc(1,"Confirm"),l.Tb())}function v(t,e){1&t&&(l.Ub(0,"span"),l.Cc(1,"Sending..."),l.Tb())}function O(t,e){if(1&t){const t=l.Vb();l.Ub(0,"div"),l.Ub(1,"div",2),l.Ub(2,"div",3),l.Ub(3,"p"),l.Cc(4,"Fill out the form to deliver your order. All fields is required."),l.Tb(),l.Ub(5,"form",4),l.Ub(6,"mat-form-field",5),l.Ub(7,"mat-label"),l.Cc(8,"Email"),l.Tb(),l.Pb(9,"input",6),l.Tb(),l.Pb(10,"br"),l.Ub(11,"mat-form-field",5),l.Ub(12,"mat-label"),l.Cc(13,"First name"),l.Tb(),l.Pb(14,"input",7),l.Tb(),l.Pb(15,"br"),l.Ub(16,"mat-form-field",5),l.Ub(17,"mat-label"),l.Cc(18,"Last name"),l.Tb(),l.Pb(19,"input",8),l.Tb(),l.Pb(20,"br"),l.Ub(21,"mat-form-field",5),l.Ub(22,"mat-label"),l.Cc(23,"Address"),l.Tb(),l.Pb(24,"input",9),l.Tb(),l.Tb(),l.Ub(25,"button",10),l.cc("click",(function(){return l.uc(t),l.gc().goBack()})),l.Cc(26,"Back to Cart"),l.Tb(),l.Ub(27,"button",11),l.cc("click",(function(){return l.uc(t),l.gc().submitForm()})),l.Ac(28,T,2,0,"span",1),l.Ac(29,v,2,0,"span",1),l.Tb(),l.Tb(),l.Ub(30,"div",12),l.Ub(31,"mat-card"),l.Pb(32,"order",13),l.Tb(),l.Tb(),l.Tb(),l.Tb()}if(2&t){const t=l.gc();l.Cb(5),l.mc("formGroup",t.orderFormGroup),l.Cb(22),l.mc("disabled",t.loading),l.Cb(1),l.mc("ngIf",!t.loading),l.Cb(1),l.mc("ngIf",t.loading),l.Cb(3),l.mc("cart",t.cart)("currency",t.currencyState)("totalPrice",t.getTotalPrice())("mode","ORDER")}}function U(t,e){if(1&t&&(l.Ub(0,"span"),l.Pb(1,"br"),l.Cc(2),l.Tb()),2&t){const t=l.gc(2);l.Cb(2),l.Ec("If you want to see your orders history, you can register use ",t.orderFormGroup.value.email," email.")}}function P(t,e){if(1&t&&(l.Ub(0,"div"),l.Ub(1,"div",14),l.Cc(2," Your order is complete!"),l.Ac(3,U,3,1,"span",1),l.Tb(),l.Ub(4,"div",15),l.Ub(5,"a",16),l.Cc(6,"Go to home page"),l.Tb(),l.Tb(),l.Tb()),2&t){const t=l.gc();l.Cb(3),l.mc("ngIf",!t.user.id)}}const w=[{path:"",component:(()=>{class t{constructor(t,e,r,o,a,l){this.formBuilder=t,this.app=e,this.auth=r,this.cartService=o,this.http=a,this.router=l,this.destroyed$=new c.a(1),this.complete=!1,this.loading=!1,this.cart=[],this.Currensy=n.b,this.user=new s.a,this.app.currencyState$.subscribe(t=>this.currencyState=t),this.orderFormGroup=this.formBuilder.group({email:[null,[i.r.required,i.r.email]],firstName:[null,[i.r.required,i.r.minLength(3)]],lastName:[null,[i.r.required,i.r.minLength(3)]],address:[null,[i.r.required,i.r.minLength(3)]]})}extractProduct(t){const e=[];return t&&t.length>0&&t.forEach(t=>{e.push({product:t.product.id,quantity:t.quantity})}),e}ngOnInit(){this.cartService.cart$.pipe(Object(a.a)(this.destroyed$)).subscribe(t=>this.cart=t),this.auth.user$.pipe(Object(a.a)(this.destroyed$)).subscribe(t=>{this.user=t,this.user.id&&(this.orderFormGroup.setControl("email",new i.d({value:t.email,disabled:!0})),this.orderFormGroup.patchValue({firstName:t.firstName,lastName:t.lastName}))})}changeCurrency(t){this.app.currencyState$.next(t.value)}submitForm(){if(this.orderFormGroup.valid){this.loading=!0;const t=this.orderFormGroup.value,{email:e}=t,r=function(t,e){var r={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.indexOf(o)<0&&(r[o]=t[o]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(o=Object.getOwnPropertySymbols(t);i<o.length;i++)e.indexOf(o[i])<0&&Object.prototype.propertyIsEnumerable.call(t,o[i])&&(r[o[i]]=t[o[i]])}return r}(t,["email"]),o=Object.assign(Object.assign({},r),{email:this.user.email?this.user.email:e,products:this.extractProduct(this.cart)});this.http.create("orders",o).subscribe(t=>{this.cartService.clearCart(),this.complete=!0,this.loading=!1},t=>{this.loading=!1})}else this.orderFormGroup.markAllAsTouched()}goBack(){this.router.navigate(["/cart"])}getTotalPrice(){if(this.cart.length>0){let t=0;return this.cart.forEach(e=>{t+=e.quantity*e.product.price}),t+2.99}}ngOnDestroy(){this.destroyed$.next(!0),this.destroyed$.complete()}}return t.\u0275fac=function(e){return new(e||t)(l.Ob(i.c),l.Ob(n.a),l.Ob(u.a),l.Ob(b.a),l.Ob(m.a),l.Ob(o.a))},t.\u0275cmp=l.Ib({type:t,selectors:[["nat-checkout"]],decls:3,vars:2,consts:[["title","Ordering"],[4,"ngIf"],[1,"checkout","row","flex-column-reverse","flex-md-row"],[1,"checkout__form","col"],[3,"formGroup"],["appearance","fill"],["matInput","","formControlName","email","placeholder","Enter your email","required",""],["matInput","","formControlName","firstName","placeholder","Enter your first name","required",""],["matInput","","formControlName","lastName","placeholder","Enter your last name","required",""],["matInput","","formControlName","address","placeholder","Enter your address","required",""],["mat-raised-button","",1,"mr-2",3,"click"],["mat-raised-button","","color","accent",3,"disabled","click"],[1,"checkout__cart","col","mb-5"],[3,"cart","currency","totalPrice","mode"],[1,"complete-text","text-center"],[1,"text-center"],["routerLink","/home","mat-raised-button","","color","primary",1,"m-link"]],template:function(t,e){1&t&&(l.Pb(0,"upper",0),l.Ac(1,O,33,8,"div",1),l.Ac(2,P,7,1,"div",1)),2&t&&(l.Cb(1),l.mc("ngIf",!e.complete),l.Cb(1),l.mc("ngIf",e.complete))},directives:[d.a,p.l,i.s,i.m,i.g,h.c,h.f,f.b,i.b,i.l,i.f,i.q,g.b,y.a,C.a,o.b,g.a],styles:[".mat-form-field[_ngcontent-%COMP%]{margin-top:10px;width:100%}.complete-text[_ngcontent-%COMP%]{font-size:1.5rem;margin:50px 0}"]}),t})()}];let k=(()=>{class t{}return t.\u0275mod=l.Mb({type:t}),t.\u0275inj=l.Lb({factory:function(e){return new(e||t)},imports:[[o.c.forChild(w)],o.c]}),t})();var G=r("PCNd"),q=r("5dmV"),I=r("sHgf"),N=r("RjRH");let j=(()=>{class t{}return t.\u0275mod=l.Mb({type:t}),t.\u0275inj=l.Lb({factory:function(e){return new(e||t)},imports:[[k,G.a,q.a,I.a,N.a]]}),t})()}}]);